<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PvP Grid - Blockchain Lottery Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>PvP Grid</h1>
            <div class="wallet-info">
                <button id="connectWallet" class="btn-primary">Connect Wallet</button>
                <div id="walletAddress" class="wallet-address hidden"></div>
            </div>
        </header>

        <!-- Game Info -->
        <div class="game-info">
            <div class="info-card">
                <h3>Current Game</h3>
                <p>Game ID: <span id="gameId">#1</span></p>
                <p>Tiles Placed: <span id="tilesSelected">0</span>/16</p>
            </div>
            <div class="info-card">
                <h3>Prize Pool</h3>
                <p class="prize-amount">14.4 PAS</p>
            </div>
            <div class="info-card">
                <h3>Entry Fee</h3>
                <p class="entry-fee">1 PAS per tile</p>
            </div>
        </div>

        <!-- Game Grid -->
        <div class="game-grid-container">
            <div class="grid-wrapper">
                <div id="gameGrid" class="game-grid">
                    <!-- Grid tiles will be generated by JavaScript -->
                </div>
            </div>
            
            <!-- Game Status -->
            <div class="game-status">
                <p id="statusMessage">Select a tile to play!</p>
                <button id="determineWinner" class="btn-action hidden">Determine Winner</button>
            </div>
        </div>


        <!-- Instructions -->
        <div class="instructions">
            <h3>How to Play</h3>
            <ol>
                <li>Connect your wallet to Paseo TestNet</li>
                <li>Click on any available tile (gray) to select it for 1 PAS</li>
                <li>When all 16 tiles are selected, anyone can trigger the winner selection</li>
            </ol>
        </div>
    </div>

    <!-- Transaction Modal -->
    <div id="txModal" class="modal hidden">
        <div class="modal-content">
            <h3>Transaction Status</h3>
            <div class="tx-status">
                <div class="loading-spinner"></div>
                <p id="txMessage">Processing transaction...</p>
            </div>
            <button id="closeTxModal" class="btn-secondary hidden">Close</button>
        </div>
    </div>

    <!-- Try multiple CDNs for ethers.js -->
    <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script>
        // Fallback to local copy if CDN fails
        if (typeof ethers === 'undefined') {
            console.warn('CDN failed, loading local ethers.js');
            document.write('<script src="./ethers.min.js"><\/script>');
        }
    </script>
    <script src="app.js"></script>
</body>
</html>